<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>á•áŸ’á‰á¾á‘á˜áŸ’ášá„áŸ‹á‘áŸ… Telegram - áŸá¶á€á›áŸ’á”á„á—áŸ’á›á¶á˜áŸ—</title>
    <style>
        body {
            font-family: 'Battambang', 'Moul', Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f0f2f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-family: 'Moul', cursive;
        }
        
        h2 {
            color: #666;
            font-size: 16px;
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .config-box {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0 20px 0;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            font-family: 'Battambang', sans-serif;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #2196F3;
        }
        
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            font-family: 'Battambang', sans-serif;
        }
        
        button:hover {
            background: #1976D2;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .message {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
            font-family: 'Battambang', sans-serif;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-family: 'Battambang', sans-serif;
        }
        
        .required {
            color: red;
        }
        
        .khmer-text {
            font-family: 'Battambang', sans-serif;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&family=Moul&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="khmer-text">ğŸ“¨ á•áŸ’á‰á¾á‘á·á“áŸ’á“á“áŸá™á–á¸á‘á˜áŸ’ášá„áŸ‹á‘áŸ… Telegram</h1>
        
        
        <h2 class="khmer-text">ğŸ“ á‘á˜áŸ’ášá„áŸ‹áŸá¶á€á›áŸ’á”á„</h2>
        <div id="responseMessage" class="message khmer-text"></div>
        
        <form id="telegramForm">
            <div class="form-group">
                <label class="khmer-text">áˆáŸ’á˜áŸ„áŸ‡á–áŸá‰ <span class="required">*</span></label>
                <input type="text" id="name" placeholder="áœá„áŸ’áŸ áŸá»á—á¶á–" required class="khmer-text">
            </div>
            
            <div class="form-group">
                <label class="khmer-text">á¢áŸŠá¸á˜áŸ‚á› <span class="required">*</span></label>
                <input type="email" id="email" placeholder="vongsopheap@example.com" required>
            </div>
            
            <div class="form-group">
                <label class="khmer-text">á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘</label>
                <input type="tel" id="phone" placeholder="+855 12 345 678" class="khmer-text">
            </div>
            
            <div class="form-group">
                <label class="khmer-text">á”áŸ’ášá—áŸá‘áŸáŸ†áá¾</label>
                <select id="subject" class="khmer-text">
                    <option value="">á‡áŸ’ášá¾áŸášá¾áŸá”áŸ’ášá—áŸá‘áŸáŸ†áá¾</option>
                    <option value="áŸáŸ†áá¾á‘á¼á‘áŸ…">áŸáŸ†áá¾á‘á¼á‘áŸ…</option>
                    <option value="áŸáŸáœá¶á‚á¶áŸ†á‘áŸ’áš">áŸáŸáœá¶á‚á¶áŸ†á‘áŸ’áš</option>
                    <option value="á€á¶ášááŸ’ášá¡á”áŸ‹á˜á€áœá·á‰">á€á¶ášááŸ’ášá¡á”áŸ‹á˜á€áœá·á‰</option>
                    <option value="á•áŸ’áŸáŸá„áŸ—">á•áŸ’áŸáŸá„áŸ—</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="khmer-text">áŸá¶áš <span class="required">*</span></label>
                <textarea id="message" rows="4" placeholder="áŸá½áŸáŸ’áá¸! ááŸ’á‰á»áŸ†á…á„áŸ‹áŸáŸ’á“á¾áŸá»áŸ†..." required class="khmer-text"></textarea>
            </div>
            
            <button type="submit" id="submitBtn" class="khmer-text">
                <span id="btnText">ğŸ“¤ á•áŸ’á‰á¾á‘áŸ… Telegram</span>
                <span id="loading" style="display: none;">â³ á€áŸ†á–á»á„á•áŸ’á‰á¾...</span>
            </button>
        </form>
        
        <div style="margin-top: 30px; padding: 15px; background: #fff3cd; border-radius: 5px; border-left: 4px solid #ffc107;">
            <h3 class="khmer-text" style="margin-top: 0; color: #856404;">ğŸ“‹ á€á¶ášááŸ‚á“á¶áŸ†ášá áŸáŸáŸ–</h3>
            <p class="khmer-text" style="margin-bottom: 0;">á”áŸ†á–áŸá‰á‘á˜áŸ’ášá„áŸ‹áá¶á„á›á¾ ášá½á…á…á»á…ášá¼á”á€á¶ášááŸá•áŸ’á‰á¾áŠá¾á˜áŸ’á”á¸á•áŸ’á‰á¾áŸá¶ášá‘áŸ… TelegramáŸ”</p>
        </div>
    </div>

    <script>
        // á€á¶ášá€áŸ†áááŸ‹ášá…á“á¶áŸá˜áŸ’á–áŸá“áŸ’á’ (á”áŸ’ášá¾áá˜áŸ’á›áŸƒášá¹á„)
        const config = {
            botToken: '8400403295:AAGt9yXWxg7a_sRWxu1swv1dQmaEBv_Rdtw',
            chatId: '1422320012',
            adminName: 'á¢áŸ’á“á€á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„'
        };
        
        // á’á¶áá» DOM
        const form = document.getElementById('telegramForm');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const loading = document.getElementById('loading');
        const responseMessage = document.getElementById('responseMessage');
        
        // á”áŸ†á–áŸá‰á‘á·á“áŸ’á“á“áŸá™á‚áŸ†ášá¼áŸá˜áŸ’ášá¶á”áŸ‹áŸá¶á€á›áŸ’á”á„
        window.addEventListener('load', function() {
            document.getElementById('name').value = 'áœá„áŸ’áŸ áŸá»á—á¶á–';
            document.getElementById('email').value = 'vongsopheap@gmail.com';
            document.getElementById('phone').value = '+855 12 345 678';
            document.getElementById('subject').value = 'áŸáŸ†áá¾á‘á¼á‘áŸ…';
            document.getElementById('message').value = 'áŸá½áŸáŸ’áá¸! ááŸ’á‰á»áŸ†á…á„áŸ‹áŸá¶á€á›áŸ’á”á„á”áŸ’ášá–áŸá“áŸ’á’á•áŸ’á‰á¾á‘á˜áŸ’ášá„áŸ‹á‘áŸ… TelegramáŸ”';
        });
        
        // á€á¶ášáŠá¶á€áŸ‹áŸáŸ’á“á¾á‘á˜áŸ’ášá„áŸ‹
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // á‘á¶á‰á™á€á‘á·á“áŸ’á“á“áŸá™á‘á˜áŸ’ášá„áŸ‹
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                subject: document.getElementById('subject').value || 'á˜á·á“á”á¶á“á”á‰áŸ’á‡á¶á€áŸ‹',
                message: document.getElementById('message').value,
                timestamp: new Date().toLocaleString('km-KH'),
                admin: config.adminName || 'á¢áŸ’á“á€á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„'
            };
            
            // á”á„áŸ’á á¶á‰á€á¶ášá•áŸ’á‘á»á€
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            loading.style.display = 'inline';
            
            try {
                // á”á„áŸ’á€á¾ááŸá¶ášáŸá˜áŸ’ášá¶á”áŸ‹ Telegram
                const telegramMessage = formatKhmerMessage(formData);
                
                // á•áŸ’á‰á¾á‘áŸ… Telegram
                const success = await sendToTelegram(telegramMessage);
                
                if (success) {
                    showMessage('âœ… á‡áŸ„á‚á‡áŸá™! áŸá¶ášááŸ’ášá¼áœá”á¶á“á•áŸ’á‰á¾á‘áŸ… TelegramáŸ” áŸá¼á˜á–á·á“á·ááŸ’á™á€áŸ’á“á»á„ bot ášá”áŸáŸ‹á¢áŸ’á“á€!', 'success');
                    form.reset();
                    document.getElementById('subject').value = '';
                } else {
                    showMessage('âŒ á˜á·á“á¢á¶á…á•áŸ’á‰á¾áŸá¶ášá”á¶á“áŸ” áŸá¼á˜á–á·á“á·ááŸ’á™ Bot Token á“á·á„ Chat ID ášá”áŸáŸ‹á¢áŸ’á“á€áŸ”', 'error');
                }
            } catch (error) {
                showMessage('âŒ á€áŸ†á á»áŸáŸ– ' + error.message, 'error');
            } finally {
                // á€áŸ†áááŸ‹á”áŸŠá¼áá»á„á¡á¾á„áœá·á‰
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                loading.style.display = 'none';
            }
        });
        
        // á”á„áŸ’á€á¾ááŸá¶ášá‡á¶á—á¶áŸá¶ááŸ’á˜áŸ‚ášáŸá˜áŸ’ášá¶á”áŸ‹ Telegram
        function formatKhmerMessage(data) {
            return `
ğŸ“‹ *á‘á˜áŸ’ášá„áŸ‹ááŸ’á˜á¸ááŸ’ášá¼áœá”á¶á“áŠá¶á€áŸ‹áŸáŸ’á“á¾*

ğŸ‘¤ *áˆáŸ’á˜áŸ„áŸ‡áŸ–* ${escapeMarkdown(data.name)}
ğŸ“§ *á¢áŸŠá¸á˜áŸ‚á›áŸ–* ${escapeMarkdown(data.email)}
ğŸ“± *á‘á¼ášáŸáŸá–áŸ’á‘áŸ–* ${data.phone ? escapeMarkdown(data.phone) : 'á˜á·á“á”á¶á“á”á‰áŸ’á‡á¶á€áŸ‹'}
ğŸ·ï¸ *á”áŸ’ášá—áŸá‘áŸ–* ${escapeMarkdown(data.subject)}
ğŸ’¬ *áŸá¶ášáŸ–*
${escapeMarkdown(data.message)}

ğŸ•’ *á–áŸá›áœáŸá›á¶áŸ–* ${data.timestamp}
ğŸ‘¨â€ğŸ’¼ *á¢áŸ’á“á€á‘á‘á½á›áŸ–* ${escapeMarkdown(data.admin)}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
áŸá¶ášá“áŸáŸ‡ááŸ’ášá¼áœá”á¶á“á•áŸ’á‰á¾áá¶á˜á‘á˜áŸ’ášá„áŸ‹á¢á“á¡á¶á‰
            `;
        }
        
        // á‚áŸá…á–á¸áá½á¢á€áŸ’áŸáš Markdown
        function escapeMarkdown(text) {
            return text.toString()
                .replace(/_/g, '\\_')
                .replace(/\*/g, '\\*')
                .replace(/\[/g, '\\[')
                .replace(/\]/g, '\\]')
                .replace(/\(/g, '\\(')
                .replace(/\)/g, '\\)')
                .replace(/~/g, '\\~')
                .replace(/`/g, '\\`')
                .replace(/>/g, '\\>')
                .replace(/#/g, '\\#')
                .replace(/\+/g, '\\+')
                .replace(/-/g, '\\-')
                .replace(/=/g, '\\=')
                .replace(/\|/g, '\\|')
                .replace(/\{/g, '\\{')
                .replace(/\}/g, '\\}');
        }
        
        // á•áŸ’á‰á¾áŸá¶ášá‘áŸ… Telegram
        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${config.botToken}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: config.chatId,
                        text: message,
                        parse_mode: 'Markdown',
                        disable_web_page_preview: true
                    })
                });
                
                const result = await response.json();
                console.log('á€á¶ášá†áŸ’á›á¾á™áá”á–á¸ TelegramáŸ–', result);
                
                return result.ok === true;
            } catch (error) {
                console.error('á€áŸ†á á»áŸá€áŸ’á“á»á„á€á¶ášá•áŸ’á‰á¾á‘áŸ… TelegramáŸ–', error);
                return false;
            }
        }
        
        // á”á„áŸ’á á¶á‰áŸá¶ášáŠá›áŸ‹á¢áŸ’á“á€á”áŸ’ášá¾
        function showMessage(text, type) {
            responseMessage.textContent = text;
            responseMessage.className = 'message ' + type;
            responseMessage.style.display = 'block';
            
            // á›á¶á€áŸ‹áŸá¶ášá‡áŸ„á‚á‡áŸá™áŠáŸ„á™áŸáŸ’áœáŸá™á”áŸ’ášáœááŸ’áá·á€áŸ’ášáŸ„á™á–á¸ áŸ¥ áœá·á“á¶á‘á¸
            if (type === 'success') {
                setTimeout(() => {
                    responseMessage.style.display = 'none';
                }, 5000);
            }
        }
    </script>
</body>
</html>